
.game-level-container { height: 100%; position: relative; overflow: hidden; background: var(--color-background); }

.game-level-state {
    display: none; position: absolute; inset: 0;
    flex-direction: column; align-items: center; justify-content: center;
    padding: var(--space-4); z-index: 10;
}
.game-level-state.active { display: flex; }

/* Loading */
.loading-card { text-align: center; max-width: 400px; display: flex; flex-direction: column; align-items: center; }
.spinner { 
    width: 40px; height: 40px; border: 4px solid var(--color-border); 
    border-top-color: var(--color-primary); border-radius: 50%; 
    animation: spin 1s linear infinite; margin-bottom: 20px; 
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Lesson */
.lesson-card {
    width: 100%; max-width: 800px; height: 90%; 
    display: flex; flex-direction: column;
}
.lesson-header { border-bottom: 1px solid var(--color-border); padding-bottom: 16px; margin-bottom: 16px; }
.lesson-body { flex-grow: 1; overflow-y: auto; font-size: var(--fs-lg); line-height: 1.6; color: var(--color-text); }
.lesson-footer { border-top: 1px solid var(--color-border); padding-top: 16px; margin-top: 16px; }

/* Quiz */
#level-quiz-state { justify-content: flex-start; padding: 0; }

.quiz-hud {
    width: 100%; padding: var(--space-4); background: var(--color-surface);
    border-bottom: 1px solid var(--color-border); display: flex; align-items: center; gap: var(--space-4);
}
.hud-item { display: flex; align-items: center; gap: 8px; font-weight: 700; font-family: var(--font-family-mono); color: var(--color-primary); }
.hud-progress { flex-grow: 1; display: flex; align-items: center; gap: 12px; }
.progress-bar { flex-grow: 1; height: 8px; background: var(--color-surface-hover); border-radius: 4px; overflow: hidden; }
#quiz-progress-bar-fill { height: 100%; background: var(--color-primary); width: 0%; transition: width 0.3s; }

.quiz-main-area {
    flex-grow: 1; width: 100%; max-width: 800px; padding: var(--space-4);
    display: flex; flex-direction: column; gap: var(--space-6); overflow-y: auto;
}

.question-card {
    background: var(--color-surface); padding: var(--space-8);
    display: flex; align-items: center; justify-content: center;
    min-height: 160px;
}
#quiz-question-text { font-size: var(--fs-xl); font-weight: 700; text-align: center; }

.options-grid {
    display: grid; grid-template-columns: 1fr; gap: var(--space-4);
}
@media (min-width: 600px) { .options-grid { grid-template-columns: 1fr 1fr; } }

.option-btn {
    width: 100%; padding: var(--space-6); text-align: left;
    background: var(--color-surface); border: 2px solid var(--color-border);
    border-radius: var(--card-radius); font-size: var(--fs-base);
    transition: all 0.2s; position: relative;
    cursor: pointer; font-weight: 500;
}
.option-btn:hover { border-color: var(--color-primary); transform: translateY(-2px); }
.option-btn.selected { border-color: var(--color-primary); background: var(--color-primary-transparent); color: var(--color-primary); font-weight: 700; }
.option-btn.correct { border-color: var(--color-success); background: var(--color-success-bg); color: var(--color-success); }
.option-btn.incorrect { border-color: var(--color-error); background: var(--color-error-bg); color: var(--color-error); }

.quiz-footer {
    width: 100%; padding: var(--space-4); background: var(--color-surface);
    border-top: 1px solid var(--color-border); display: flex; justify-content: space-between;
}

/* Results */
.results-card { text-align: center; max-width: 500px; padding: var(--space-12); }
.results-visual { height: 100px; margin-bottom: 20px; /* Placeholder for animation */ }
.xp-text { font-size: var(--fs-xl); color: var(--color-primary); font-weight: 800; margin: 16px 0; }
.results-actions { display: flex; flex-direction: column; gap: 12px; width: 100%; }
